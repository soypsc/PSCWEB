<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Panama Shipping Co. - Calculadora de Compras</title>
  <meta name="robots" content="noindex">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap">

  <style>
    /* ====================================================================== */
    /* Estilos Globales y Reseteo (Originales) */
    /* ====================================================================== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #fff;
      color: #000;
      line-height: 1.6;
      overflow-x: hidden;
    }
    a {
      text-decoration: none;
      color: inherit;
    }
    :root{
      --blue-1:#2325d4;
      --blue-2:#1a1cb3;
      --accent:#ffec00;
      --bg:#fff;
      --muted:#777;
      --card-border:#e6e6ee;
      --shadow: 0 6px 30px rgba(0,0,0,0.06);
      --radius:12px;
      --max-width:1200px;
    }

    /* ====================================================================== */
    /* HEADER (Original) */
    /* ====================================================================== */
    header {
      background: linear-gradient(135deg, #2325d4, #1a1cb3);
      color: white;
      position: relative;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      height: 140px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 25px;
    }
    .header-inner {
      max-width: 1200px;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: relative;
      z-index: 2;
    }
    .logo {
      height: 180px;
      display: flex;
      align-items: center;
    }
    .logo img {
      max-height: 225px;
      width: auto;
      object-fit: contain;
      user-select: none;
      pointer-events: none;
    }
    nav {
      display: flex;
      gap: 20px;
      align-items: center;
      flex-wrap: wrap;
    }
    nav a {
      color: white;
      font-weight: 500;
      font-size: 14px;
      position: relative;
      transition: color 0.3s ease, transform 0.2s ease;
      will-change: color, transform;
    }
    nav a:hover {
      color: #ffec00;
      transform: translateY(-2px);
    }
    nav a::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -3px;
      width: 0%;
      height: 2px;
      background: #ffec00;
      transition: width 0.3s ease;
    }
    nav a:hover::after {
      width: 100%;
    }
    .header-buttons {
      display: flex;
      gap: 10px;
    }
    .btn-header {
      background: #ffec00;
      color: #2325d4;
      padding: 8px 18px;
      border-radius: 12px;
      font-weight: 600;
      font-size: 13px;
      transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .btn-header:hover {
      background: #e6d800;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.2);
    }
    .onda {
      position: absolute;
      bottom: -20px;
      left: 0;
      width: 100%;
      height: 40px;
      background: url('data:image/svg+xml;utf8,<svg width="100%" height="40" viewBox="0 0 1440 40" xmlns="http://www.w3.org/2000/svg"><path fill="%23fff" d="M0 20 Q360 40 720 20 T1440 20 V40 H0 Z"/></svg>') no-repeat bottom;
      background-size: cover;
      z-index: 1;
      pointer-events: none;
    }
    .dropdown {
      position: relative;
      display: inline-block;
    }
    .dropdown-content {
      display: none;
      position: absolute;
      background-color: #2325d4;
      min-width: 200px;
      box-shadow: 0px 8px 16px rgba(0,0,0,0.25);
      border-radius: 8px;
      z-index: 10002;
      overflow: hidden;
    }
    .dropdown-content a {
      color: white;
      padding: 10px 16px;
      display: block;
      font-size: 14px;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    .dropdown-content a:hover {
      background-color: #1a1cb3;
      color: #ffec00;
    }
    .dropdown:hover .dropdown-content {
      display: block;
    }

    /* Media Queries (Original) */
    @media (max-width: 900px) {
      header { height: auto; }
      .header-buttons { display: none; }
      .menu-toggle {
        display: block;
        font-size: 26px;
        cursor: pointer;
        color: white;
        position: relative;
        z-index: 10001;
        user-select: none;
      }
      header nav {
        display: none;
        position: absolute;
        top: 100%;
        right: 20px;
        background: #2325d4;
        flex-direction: column;
        gap: 8px;
        padding: 14px;
        border-radius: 12px;
        box-shadow: 0 12px 24px rgba(0,0,0,.25);
        z-index: 10000;
        width: max-content;
        min-width: 220px;
      }
      header nav.show { display: flex; }
      header .dropdown:hover .dropdown-content { display: none; }
      header .dropdown .dropdown-content {
        position: relative;
        top: auto;
        left: auto;
        background: #1a1cb3;
        box-shadow: none;
        min-width: 220px;
      }
    }
    @media (min-width: 901px){
      .menu-toggle{ display:none; }
      header nav{
        display:flex !important;
        position:static;
        box-shadow:none;
        padding:0;
      }
    }

    /* ====================================================================== */
    /* FOOTER (Original) */
    /* ====================================================================== */
    footer {
      background: #fff;
      color: #000;
      padding: 40px 20px;
      margin-top: 50px;
      box-shadow: 0 -4px 15px rgba(0,0,0,0.08);
    }
    .footer-container {
      max-width: 1200px;
      margin: auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 30px;
    }
    .footer-col h3 {
      font-size: 1.2rem;
      margin-bottom: 12px;
      color: #333;
    }
    .footer-col p, .footer-col a {
      font-size: 14px;
      color: #555;
      transition: color 0.3s ease;
    }
    .footer-col a:hover { color: #2325d4; }
    .social-icons {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .footer-bottom {
      text-align: center;
      margin-top: 30px;
      font-size: 12px;
      color: #777;
      border-top: 1px solid rgba(0,0,0,0.1);
      padding-top: 15px;
    }
    .footer-links {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 10px;
    }
    .footer-links a {
      color: #2325d4;
      font-size: 12px;
    }

    /* WhatsApp Flotante (Original) */
    .whatsapp-float {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 999;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      border-radius: 50%;
    }
    .whatsapp-float:hover {
      transform: scale(1.05) translateY(-2px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.3);
    }
    .whatsapp-float img {
      width: 55px;
      height: 55px;
      border-radius: 50%;
    }
  </style>
  
  <style>
    main.wrapper {
      max-width:var(--max-width);
      margin:40px auto 18px; 
      padding:1.6rem;
      display: flex; /* A√±adido para centrar */
      justify-content: center; /* A√±adido para centrar */
      align-items: flex-start; /* A√±adido para centrar */
    }
    :root {
      --bg: #ffffff;
      --fg: #1c1c1e;
      --border: #d1d1d6;
      --font: 'Poppins', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }
    .card {
      background: #fff;
      padding: 2rem;
      border-radius: 2rem;
      width: 100%;
      max-width: 720px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
      border: 1px solid var(--border);
    }
    input, button {
      width: 100%;
      font-size: 1rem;
      padding: 0.85rem 1rem;
      border-radius: 0.75rem;
      margin-bottom: 1rem;
      border: 1px solid var(--border);
    }
    button {
      background-color: #000;
      color: #fff;
      cursor: pointer;
      font-weight: 500;
    }
    button:hover { background-color: #222; }
    #resultado, #calculadora, #resultadoCalc { display: none; }
    .card img {
      max-width: 240px;
      border-radius: 1rem;
      margin-bottom: 1rem;
    }
    .producto h3 {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    .producto span {
      display: inline-block;
      font-size: 1.25rem;
      font-weight: 600;
      color: black;
      margin-top: 0.25rem;
    }
    .option-block {
      border: 1px solid #ececec;
      border-radius: 0.5rem;
      padding: 10px 12px;
      margin-bottom: 12px;
      background: #fbfbfb;
    }
    .option-header {
      font-weight: 700;
      margin-bottom: 6px;
      display: flex;
      justify-content: space-between;
      font-size: 0.95rem;
    }
    .field {
      display: flex;
      justify-content: space-between;
      padding: 6px 0;
      font-size: 1rem;
      border-bottom: 1px solid #f0f0f0;
    }
    .field:last-child { border-bottom: none; }
    .subtle {
      font-size: 0.85rem;
      color: #777;
    }
    .spinner {
      display: inline-block;
      width: 24px;
      height: 24px;
      border: 3px solid #ccc;
      border-top-color: #000;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      vertical-align: middle;
      margin-right: 8px;
    }
    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }
  </style>

  <style media="print">
    body {
      padding: 1rem;
      margin: 0;
      zoom: 80%;
    }
    .card {
      box-shadow: none;
      border: none;
      padding: 0;
      margin: 0;
    }
    img {
      max-width: 150px;
    }
    .producto h3,
    .producto span {
      font-size: 1rem;
    }
    .field-block,
    .option-block {
      page-break-inside: avoid;
    }
    .field-block strong {
      font-size: 0.9rem;
    }
    @page {
      size: A4;
      margin: 1.5cm;
    }
    .logo-print-only {
      display: none;
    }
    @media print {
      .logo-print-only {
        display: block;
        position: fixed;
        top: 1rem;
        right: 1rem;
        width: 200px;
        height: 90px;
        z-index: 9999;
      }
      .logo-print-only img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        display: block;
      }
    }
  </style>
</head>
<body>

  <header class="no-print">
    <div class="header-inner">
      <div class="logo">
        <img src="https://static.wixstatic.com/media/f7f5e1_8e6b42f370a3408ea4c305089fadc49c~mv2.png" alt="Logo de Panama Shipping Co.">
      </div>
      <div class="menu-toggle">‚ò∞</div>
      <nav>
        <a href="../index.html">Inicio</a>
        <a href="../Rastreo/">Rastreador de Paquetes</a>
        <a href="../Cotizador/">Cotiza tus Compras</a>
        <a href="../ML/">Solicitar ML</a>
        
        <div class="dropdown">
          <a href="#">M√°s ‚ñæ</a>
          <div class="dropdown-content">
            <a href="../DG/">Mercanc√≠a Peligrosa</a>
            <a href="../Politicas/">T√©rminos y Condiciones</a>
          </div>
        </div>
      </nav>
      <div class="header-buttons">
        <a href="https://psc.e-rmez.com/zonacliente/" class="btn-header">Zona de Clientes</a>
        <a href="https://psc.e-rmez.com/casillero_register.php" class="btn-header">Reg√≠strate</a>
      </div>
    </div>
    <div class="onda" aria-hidden="true"></div>
  </header>

  <main class="wrapper">
      <div class="card">
      <div class="logo-visible" style="text-align: center; margin-bottom: 1rem">
        <img
          src="https://i.postimg.cc/G35hZmXg/Captura-de-pantalla-2025-08-06-a-la-s-3-36-08-p-m.png"
          alt="Logo Panam√° Shipping"
          style="width: 200px; height: auto"
        />
      </div>

      <div
        id="resultado-producto"
        style="text-align: center; margin-bottom: 1rem"
      >
        <img id="imagen-producto" style="display: none" />
        <h3 id="titulo-producto" style="display: none"></h3>
        <span id="precio-producto" style="display: none"></span>
      </div>

      <div id="buscador">
        <h2>Buscar Producto</h2>
        <input
          id="linkBuscar"
          placeholder="üîó Pega el link del producto"
          type="text"
        />
        <button id="btnBuscar" onclick="buscarProducto()">Buscar</button>
        <button onclick="mostrarCalculadoraDirecto()">Saltar</button>
        <div id="resultado"></div>
      </div>

      <div id="calculadora">
        <hr />
        <h2>Calculadora de Compras</h2>
        <label>Link del producto</label>
        <input id="link" placeholder="https://..." type="url" />
        <label>Costo del producto ($)</label>
        <input
          id="costo"
          min="0"
          placeholder="Precio de Pagina"
          step="0.01"
          type="number"
        />
        <label>Abono ($) (opcional)</label>
        <input
          id="abono"
          min="0"
          placeholder="Abono"
          step="0.01"
          type="number"
        />
        <label>Peso aproximado (libras)</label>
        <input
          id="peso"
          min="0"
          placeholder="Peso Aprox. (libras)"
          step="0.01"
          type="number"
        />
        <button onclick="calcular()">Calcular</button>

        <div id="resultadoCalc" style="margin-top: 1.5rem"></div>

        <div id="accionesCalc" style="display: none">
          <button onclick="limpiarTodo()">Limpiar</button>
          <button id="btnImprimir" onclick="imprimirCotizacion()">
            Imprimir
          </button>
        </div>
      </div>

      <div
        style="
          margin-top: 2rem;
          background: #f9f9f9;
          border: 1px solid #e0e0e0;
          padding: 1rem 1.25rem;
          border-radius: 1rem;
          font-size: 0.9rem;
          color: #333;
        "
      >
        <strong style="display: block; margin-bottom: 0.5rem"
          >IMPORTANTE</strong
        >
        EL PESO DEL PRODUCTO Y EL SALDO SE CANCELAN AL MOMENTO DE RETIRAR.
        ABONOS MENORES A EL 80% DEL VALOR DEL PRODUCTO TIENEN UN COSTO DE
        FINANCIAMIENTO DEL SALDO PENDIENTE.
      </div>
    </div>
  </main>

  <footer class="no-print">
    <div class="footer-container">
      <div class="footer-col">
        <h3>Contacto</h3>
        <p>Asistencia personalizada</p>
        <div class="social-icons">
          <a href="https://www.instagram.com/soypsc?igsh=MWQwdHl6eXJjcmRqYg%3D%3D&utm_source=qr" target="_blank" rel="noopener">üì∏ Instagram</a>
          <a href="https://api.whatsapp.com/send?phone=50767906781&text=Hola%20quiero%20mas%20informacion" target="_blank" rel="noopener">üìû +507 67906781</a>
          <a href="mailto:info@soypsc.com">‚úâÔ∏è info@soypsc.com</a>
          <a href="https://api.whatsapp.com/send?phone=50767906781&text=Hola%20quiero%20mas%20informacion" target="_blank" rel="noopener">üí¨ WhatsApp</a>
        </div>
      </div>
      <div class="footer-col">
        <h3>Enlaces R√°pidos</h3>
        <a href="../Politicas/">T√©rminos y Condiciones</a><br>
        <a href="../DG/">Mercanc√≠a Restringida</a>
      </div>
      <div class="footer-col">
        <h3>Sobre Nosotros</h3>
        <p>Panama Shipping Co. facilita tus compras en l√≠nea y env√≠os a Panam√° con rapidez y seguridad.</p>
      </div>
    </div>
    <div class="footer-bottom">
      &copy; 2023 Panama Shipping Co. Todos los derechos reservados.
      <div class="footer-links">
        <a href="#">T√©rminos</a>
        <a href="#">Privacidad</a>
      </div>
    </div>
  </footer>

  <a href="https://api.whatsapp.com/send?phone=50767906781&text=Hola%20quiero%20mas%20informacion" class="whatsapp-float" target="_blank" rel="noopener">
    <img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/WhatsApp_icon.png" alt="Icono de WhatsApp" />
  </a>

<script>
    const apiKey = "fcee4890ff2a9fd58e410400103b094d";

    async function buscarProducto() {
      const boton = document.getElementById("btnBuscar");
      const link = document.getElementById("linkBuscar").value.trim();
      const resultado = document.getElementById("resultado");
      resultado.innerHTML = "";

      boton.disabled = true;
      boton.textContent = "Buscando...";

      if (!link.includes("amazon.")) {
        resultado.innerHTML =
          "<p>‚ö†Ô∏è No se encontr√≥ el precio. Puede ingresarlo manualmente.</p>";
        mostrarCalculadora(link);
        boton.disabled = false;
        boton.textContent = "Buscar";
        return;
      }

      document.getElementById("titulo-producto").style.display = "none";
      document.getElementById("precio-producto").style.display = "none";
      document.getElementById("imagen-producto").style.display = "none";

      setTimeout(() => {
        resultado.innerHTML = `<p><span class="spinner"></span>Buscando producto en Amazon...</p>`;
      }, 100);

      const scrapeUrl = `https://api.scraperapi.com?api_key=${apiKey}&url=${encodeURIComponent(
        link
      )}`;

      try {
        const res = await fetch(scrapeUrl);
        const html = await res.text();
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, "text/html");

        const titulo =
          doc.querySelector("#productTitle")?.textContent?.trim() ||
          "Sin t√≠tulo";
        const precioRaw =
          doc.querySelector("#priceblock_ourprice")?.textContent ||
          doc.querySelector("#priceblock_dealprice")?.textContent ||
          doc.querySelector(".a-price .a-offscreen")?.textContent ||
          null;
        const precio = precioRaw
          ? parseFloat(precioRaw.replace(/[^0-9.]/g, ""))
          : null;
        const img =
          doc.querySelector("#landingImage")?.src ||
          doc.querySelector("#imgTagWrapperId img")?.src ||
          null;

        if (precio) {
          if (img) {
            const imagen = document.getElementById("imagen-producto");
            imagen.src = img;
            imagen.style.display = "block";
          }
          const tituloEl = document.getElementById("titulo-producto");
          tituloEl.textContent = titulo;
          tituloEl.style.display = "block";
          const precioEl = document.getElementById("precio-producto");
          precioEl.textContent = `$${precio.toFixed(2)}`;
          precioEl.style.display = "inline-block";
          document.getElementById("costo").value = precio.toFixed(2);
          resultado.innerHTML = `
           <div class="producto">
             ${img ? `<img src="${img}" alt="Imagen del producto">` : ""}
             <h3>${titulo}</h3>
             <span>$${precio.toFixed(2)}</span>
           </div>
         `;
          mostrarCalculadora(link, precio);
        } else {
          resultado.innerHTML = `<p>‚ö†Ô∏è No se encontr√≥ el precio. Puede ingresarlo manualmente.</p>`;
          mostrarCalculadora(link);
        }
      } catch (error) {
        resultado.innerHTML = `<p>‚ùå Error al buscar el producto.</p>`;
        console.error(error);
        mostrarCalculadora(link);
      }

      boton.disabled = false;
      boton.textContent = "Buscar";
    }

    function mostrarCalculadora(link = "", precio = null) {
      document.getElementById("calculadora").style.display = "block";
      document.getElementById("link").value = link;
      if (precio) document.getElementById("costo").value = precio.toFixed(2);
    }

    function calcular() {
      const costo = parseFloat(document.getElementById("costo").value);
      const abono =
        parseFloat(document.getElementById("abono").value) || null; // se mantiene comportamiento original
      const peso = parseFloat(document.getElementById("peso").value) || 0;

      const contenedor = document.getElementById("resultadoCalc");
      contenedor.style.display = "block";
      contenedor.innerHTML = "";

      const pesoLb = Math.ceil(peso);
      const costoPeso = pesoLb * 2.95;

      const comision = costo < 20 ? 5 : costo * 0.2;
      const tarifa = 2.75;
      const totalBase = costo + comision + tarifa;
      const porc80 = costo * 0.8;

      // ‚úÖ Corregido: el saldo mostrado incluye el 30% cuando aplica
      function calcularSaldo(abonoVal) {
        if (abonoVal >= totalBase) {
          return { totalFinal: abonoVal, abono: abonoVal, saldo: 0 };
        }
        const saldoBase = totalBase - abonoVal;
        const saldoConFin = abonoVal > porc80 ? saldoBase : saldoBase * 1.3;
        const totalFinal = abonoVal + saldoConFin;
        return { totalFinal, abono: abonoVal, saldo: saldoConFin };
      }

      if (!abono) {
        const opciones = [
          { label: "Opci√≥n 1", pct: 1.0 },
          { label: "Opci√≥n 2", pct: 0.6 },
          { label: "Opci√≥n 3", pct: 0.25 },
        ];
        opciones.forEach((op) => {
          const abonoVal = costo * op.pct;
          const datos = calcularSaldo(abonoVal);
          contenedor.innerHTML += `
           <div class="option-block">
             <div class="option-header">
               <div>${op.label}</div>
               <div class="subtle">${Math.round(op.pct * 100)}% del costo</div>
             </div>
             <div class="field"><div>Total de la compra:</div><div class="value">$${datos.totalFinal.toFixed(
               2
             )}</div></div>
             <div class="field"><div>Abono:</div><div class="value">$${datos.abono.toFixed(
               2
             )}</div></div>
             <div class="field"><div>Saldo a cancelar:</div><div class="value">$${datos.saldo.toFixed(
               2
             )}</div></div>
           </div>
         `;
        });
      } else {
        const datos = calcularSaldo(abono);
        contenedor.innerHTML += `
         <div class="option-block">
           <div class="option-header">
             <div>Cotizaci√≥n personalizada</div>
             <div class="subtle">Abono ingresado</div>
           </div>
           <div class="field"><div>Total de la compra:</div><div class="value">$${datos.totalFinal.toFixed(
             2
           )}</div></div>
           <div class="field"><div>Abono:</div><div class="value">$${datos.abono.toFixed(
             2
           )}</div></div>
           <div class="field"><div>Saldo a cancelar:</div><div class="value">$${datos.saldo.toFixed(
             2
           )}</div></div>
         </div>
       `;
      }

      if (peso > 0) {
        contenedor.innerHTML += `
         <div class="option-block">
           <div class="option-header"><div>Peso estimado</div></div>
           <div class="field"><div>Peso:</div><div class="value">${pesoLb} lb</div></div>
           <div class="field"><div>Costo estimado del peso:</div><div class="value">$${costoPeso.toFixed(
             2
           )}</div></div>
         </div>
       `;
      }

      document.getElementById("accionesCalc").style.display = "block";
    }

    function limpiarTodo() {
      document.getElementById("linkBuscar").value = "";
      document.getElementById("link").value = "";
      document.getElementById("costo").value = "";
      document.getElementById("abono").value = "";
      document.getElementById("peso").value = "";

      document.getElementById("resultado").innerHTML = "";
      document.getElementById("resultadoCalc").innerHTML = "";
      document.getElementById("calculadora").style.display = "none";

      const img = document.getElementById("imagen-producto");
      const titulo = document.getElementById("titulo-producto");
      const precio = document.getElementById("precio-producto");

      img.src = "";
      img.style.display = "none";
      titulo.textContent = "";
      titulo.style.display = "none";
      precio.textContent = "";
      precio.style.display = "none";

      const boton = document.getElementById("btnBuscar");
      boton.disabled = false;
      boton.textContent = "Buscar";

      document.getElementById("linkBuscar").focus();
      document.getElementById("accionesCalc").style.display = "none";
      document.getElementById("btnImprimir").style.display = "inline-block";
    }

    function mostrarCalculadoraDirecto() {
      document.getElementById("resultado").innerHTML = "";
      document.getElementById("imagen-producto").style.display = "none";
      document.getElementById("titulo-producto").style.display = "none";
      document.getElementById("precio-producto").style.display = "none";

      document.getElementById("linkBuscar").value = "";
      document.getElementById("link").value = "";
      document.getElementById("costo").value = "";
      document.getElementById("abono").value = "";
      document.getElementById("peso").value = "";
      document.getElementById("resultadoCalc").innerHTML = "";
      document.getElementById("btnImprimir").style.display = "none";

      document.getElementById("calculadora").style.display = "block";
    }

    document
      .getElementById("linkBuscar")
      .addEventListener("keydown", function (e) {
        if (e.key === "Enter") buscarProducto();
      });

    function imprimirCotizacion() {
      const link = document.getElementById("link").value;
      const costo = document.getElementById("costo").value;
      const abono = document.getElementById("abono").value;
      const peso = document.getElementById("peso").value;

      const imagen = document.getElementById("imagen-producto").outerHTML;
      const titulo = document.getElementById("titulo-producto").textContent;
      const precio = document.getElementById("precio-producto").textContent;
      const resultadoCalc =
        document.getElementById("resultadoCalc").innerHTML;
      const notaLegal = document.querySelector(
        "div[style*='margin-top: 2rem']"
      ).outerHTML;

      const ventana = window.open("", "", "height=800,width=600");
      ventana.document.write(
        "<html><head><title>Imprimir Cotizaci√≥n</title>"
      );
      ventana.document.write("<style>");
      ventana.document.write(`
       body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; padding: 2rem; }
       img { max-width: 200px; border-radius: 1rem; margin-bottom: 1rem; }
       .producto { text-align: center; margin-bottom: 1rem; }
       .producto h3 { font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem; }
       .producto span { font-size: 1.25rem; font-weight: 600; color: black; margin-top: 0.25rem; display: inline-block; }
       .field-block { margin-bottom: 1rem; }
       .field-block strong { display: block; margin-bottom: 0.25rem; }
       .option-block { border: 1px solid #ececec; border-radius: 0.5rem; padding: 10px 12px; margin-bottom: 12px; background: #fbfbfb; }
       .option-header { font-weight: 700; margin-bottom: 6px; display: flex; justify-content: space-between; font-size: 0.95rem; }
       .field { display: flex; justify-content: space-between; padding: 6px 0; font-size: 1rem; border-bottom: 1px solid #f0f0f0; }
       .field:last-child { border-bottom: none; }
       .subtle { font-size: 0.85rem; color: #777; }
       @media print {
         html, body { zoom: 80%; margin: 0; padding: 0; }
         .producto img { max-width: 140px; }
         .option-block, .field-block { page-break-inside: avoid; }
         @page { size: A4; margin: 1cm; }
       }
     `);
      ventana.document.write("</style></head><body>");

      ventana.document.write(`
       <div style="position: fixed; top: 1rem; right: 1rem; width: 200px; height: 90px; z-index: 9999;">
         <img src="https://i.postimg.cc/G35hZmXg/Captura-de-pantalla-2025-08-06-a-la-s-3-36-08-p-m.png" style="width: 100%; height: 100%; object-fit: contain;" />
       </div>
     `);

      ventana.document.write(`
       <div class="producto">
         ${imagen}
         <h3>${titulo}</h3>
         <span>${precio}</span>
       </div>

       <div class="field-block">
         <strong>Link del producto:</strong>
         <div>${link}</div>
       </div>
       <div class="field-block">
         <strong>Costo del producto:</strong>
         <div>$${costo}</div>
       </div>
       <div class="field-block">
         <strong>Abono:</strong>
         <div>$${abono || "‚Äî"}</div>
       </div>
       <div class="field-block">
         <strong>Peso aproximado:</strong>
         <div>${peso ? peso + " lb" : "‚Äî"}</div>
       </div>

       ${resultadoCalc}
       ${notaLegal}
     `);

      ventana.document.write("</body></html>");
      ventana.document.close();
      ventana.focus();
      ventana.print();
      ventana.close();
    }

    document.getElementById("linkBuscar").focus();
</script>

<script>
 (function(){
   const header = document.querySelector('header');
   const nav = header ? header.querySelector('nav') : null;
   const menuToggle = header ? header.querySelector('.menu-toggle') : null;

   if (!header || !nav || !menuToggle) {
     return; // Salir si los elementos no existen
   }

   function toggleMenu(show) {
     if (show) {
       nav.classList.add('show');
       menuToggle.setAttribute('aria-expanded', 'true');
     } else {
       nav.classList.remove('show');
       menuToggle.setAttribute('aria-expanded', 'false');
     }
   }

   menuToggle.addEventListener('click', (e) => {
     e.stopPropagation(); 
     toggleMenu(!nav.classList.contains('show'));
   });

   document.addEventListener('click', (e) => {
     if (!header.contains(e.target)) {
       toggleMenu(false);
     }
   });

   window.addEventListener('resize', () => {
     if (window.innerWidth > 900) {
       toggleMenu(false);
     }
   });
 })();
</script>

</body>
</html>
